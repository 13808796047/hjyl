<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>账户充值</title>
    <link rel="stylesheet" href="__JS__/layer/layui/css/layui.css" />
  </head>
  <body>
    <div class="ys-content" style="height: 800px; background: #fff">
      <h2
        style="
          color: #584204;
          background-color: #a39a7d;
          font-size: 18px;
          font-weight: 700;
          padding: 15px 30px;
        "
        class="header"
      >
        账号充值
      </h2>
      <div class="layui-tab" style="padding: 20px">
        <ul class="layui-tab-title">
          <li class="layui-this">银行卡充值</li>
          <li>USDT充值</li>
        </ul>
        <div class="layui-tab-content">
          <div class="layui-tab-item layui-show">
            <form
              class="layui-form layui-form-pane"
              action=""
              style="margin-right: 200px; padding: 30px"
            >
              <div class="layui-form-item">
                <label class="layui-form-label">开户行：</label>
                <div class="layui-input-block">
                  <input
                    type="text"
                    class="layui-input"
                    value="{$bank.banklist.name}"
                    readonly
                  />
                </div>
              </div>
              <div class="layui-form-item">
                <label class="layui-form-label">持卡人：</label>
                <div class="layui-input-block">
                  <input
                    type="text"
                    class="layui-input"
                    value="{$bank.username}"
                    readonly
                  />
                </div>
              </div>
              <div class="layui-form-item">
                <label class="layui-form-label">银行卡号：</label>
                <div class="layui-input-block">
                  <input
                    type="text"
                    class="layui-input"
                    value="{$bank.account}"
                    readonly
                  />
                </div>
              </div>
              <div class="layui-form-item">
                <label class="layui-form-label">充值金额：</label>
                <div class="layui-input-inline">
                  <input
                    name="amount"
                    type="number"
                    min="0.01"
                    required
                    value="0.01"
                    class="layui-input"
                  />
                </div>
                <div class="layui-form-mid layui-word-aux">
                  充值金额范围:100-50000元,必须带小数点
                </div>
              </div>
              <div class="layui-form-item">
                <div class="layui-input-inline">
                  <button
                    class="layui-btn"
                    lay-submit
                    lay-filter="rechargeForm"
                  >
                    立即提交
                  </button>
                  <button type="reset" class="layui-btn layui-btn-primary">
                    重置
                  </button>
                </div>
                <div class="layui-form-mid layui-word-aux">
                  转账成功后，再点确定，否则无法到账！
                </div>
              </div>
            </form>
          </div>
          <div class="layui-tab-item">内容2</div>
        </div>
      </div>
    </div>
    <script src="__JS__/layer/layui/layui.js"></script>
    <script>
      layui.use(["jquery", "form", "layer"], function () {
        var form = layui.form(),
          $ = layui.jquery,
          layer = layui.layer;
        var intDiff = parseInt(0); //倒计时总秒数量
        var from = "{$rechargeFromTime}";
        var to = "{$rechargeToTime}";
        //监听提交
        form.on("submit(rechargeForm)", function (data) {
          layer.confirm(
            "充值时间 " + from + " 到 " + to + "您确认提交吗？",
            {
              btn: ["确定", "取消"], //按钮
            },
            function () {
              $.ajax({
                url: "/user/recharge",
                type: "post",
                data: data.field.account,
                beforeSend: function () {
                  this.layerIndex = layer.load(0, {
                    shade: [0.5, "#393D49"],
                  });
                },
                success: function (data) {
                  if (data.code == 200) {
                    layer.msg(
                      data.message,
                      {
                        icon: 6, //成功的表情
                        time: 1000, //1秒关闭（如果不配置，默认是3秒）
                      },
                      function () {
                        location.reload();
                      }
                    );
                  } else {
                    layer.msg(data.message, { icon: 5 }); //失败的表情
                    return;
                  }
                },
                complete: function () {
                  layer.close(this.layerIndex);
                },
              });
            },
            function () {}
          );
          return false;
        });
      });
    </script>
  </body>
</html>
